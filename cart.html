<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Cart â€¢ On God Bend Mini Mart</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<style>
:root { --brand:#b8860b; --brand-dark:#8b6508; --ink:#1f1f1f; --bg:#f7f7f9; --card:#ffffff; }
*{box-sizing:border-box;}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink);}
a{color:inherit;text-decoration:none;}
header{display:flex;align-items:center;justify-content:space-between;padding:10px 16px;background:#111;color:#fff;}
.brand{display:flex;align-items:center;gap:10px;} .brand img{height:90px;width:auto;border-radius:6px;}
.nav{display:flex;gap:14px;} .nav a{padding:8px 10px;border-radius:8px;} .nav a:hover{background:rgba(255,255,255,.08);}
.cart-section{padding:26px 16px;max-width:900px;margin:0 auto;background:#fff;border-radius:16px;box-shadow:0 6px 18px rgba(0,0,0,.06);}
.cart-list{margin:12px 0;}
.cart-item{display:grid;grid-template-columns:64px 1fr auto;align-items:center;gap:10px;margin-bottom:12px;}
.cart-item img{width:64px;height:64px;object-fit:cover;border-radius:8px;}
.qty{display:inline-flex;align-items:center;border:1px solid #ddd;border-radius:10px;overflow:hidden;}
.qty button{background:#f4f4f4;border:0;padding:4px 8px;cursor:pointer;}
.qty span{min-width:30px;text-align:center;}
.cart-footer{padding:12px;border-top:1px solid #eee;}
.cart-footer .total{display:flex;justify-content:space-between;font-weight:800;margin-bottom:10px;}
.checkout-btn{width:100%;background:var(--brand);color:#fff;border:0;border-radius:10px;padding:10px 12px;font-weight:700;cursor:pointer;}
footer{padding:24px 16px;text-align:center;background:#111;color:#bbb;margin-top:26px;}

.cart-icon {
  position: relative;
  display: inline-block;
}

.cart-btn {
  font-size: 30px;
  text-decoration: none;
  display: inline-flex; 
  align-items: center; 
  color: #fff; 
  border: 0; 
  border-radius: 10px; 
  padding: 8px 12px; 
  font-weight: 600; 
  cursor: pointer;
  position: relative;
}

#cartCount {
  position: absolute;
  top: -3px;    /* move slightly above */
  right: -3px;  /* move slightly to the right */
  background:var(--brand);
  font-size: 12px;
  font-weight: bold;
  border-radius: 50%;
  padding: 2px 6px;
  color: #fff; 
  line-height: 1;
}

/* Hamburger icon */
  .hamburger {
    display: block;
    width: 30px;
    height: 25px;
    margin: 20px;
    position: relative;
    cursor: pointer;
    z-index: 2001;
    color: white;
  }

  .hamburger span {
    position: absolute;
    height: 4px;
    width: 100%;
    background: #333;
    border-radius: 2px;
    transition: all 0.3s ease;
  }

  .hamburger span:nth-child(1) { top: 0; }
  .hamburger span:nth-child(2) { top: 10px; }
  .hamburger span:nth-child(3) { top: 20px; }

  /* Popup menu */
  .menu {
    position: fixed;
    top: 40px;
    right: -250px; /* hidden by default */
    width: 250px;
    height: auto;
    background: #f1f1f1;
    box-shadow: -2px 0 5px rgba(0,0,0,0.3);
    transition: right 0.3s ease;
    padding-top: 60px;
    border-radius: 8px;
    z-index: 2000;
  }

  .menu a {
    display: block;
    padding: 15px 25px;
    text-decoration: none;
    color: #333;
    font-size: 18px;
  }

  .menu a:hover {
    background: #ddd;
  }

  /* Active menu */
  .menu.active {
    right: 0;
  }

  /* Optional: animate hamburger to X */
  .hamburger.active span:nth-child(1) {
    transform: rotate(45deg);
    top: 10px;
  }
  .hamburger.active span:nth-child(2) {
    opacity: 0;
  }
  .hamburger.active span:nth-child(3) {
    transform: rotate(-45deg);
    top: 10px;
  } 
</style>
<style>
.empty-cart {
  text-align: center;
  padding: 50px 20px;
  color: #666;
}

.empty-cart i {
  font-size: 70px;
  color: var(--brand);
  margin-bottom: 15px;
}

.empty-cart h2 {
  font-size: 22px;
  margin-bottom: 8px;
  color: var(--ink);
}

.empty-cart p {
  font-size: 15px;
  margin-bottom: 20px;
}

.empty-cart a {
  display: inline-block;
  background: var(--brand);
  color: #fff;
  padding: 10px 18px;
  border-radius: 8px;
  font-weight: bold;
  transition: 0.3s;
}

.empty-cart a:hover {
  background: var(--brand-dark);
}
.suggested-products {
  margin-top: 30px;
}

.suggested-products h3 {
  font-size: 18px;
  margin-bottom: 15px;
  color: var(--ink);
}

.suggested-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 16px;
}

.suggested-item {
  background: var(--card);
  border-radius: 10px;
  padding: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,.06);
  text-align: center;
}

.suggested-item img {
  width: 100%;
  height: 120px;
  object-fit: cover;
  border-radius: 8px;
  margin-bottom: 8px;
}

.suggested-item h4 {
  font-size: 15px;
  margin: 6px 0;
}

.suggested-item p {
  font-weight: bold;
  color: var(--brand);
  margin-bottom: 8px;
}

.suggested-item button {
  background: var(--brand);
  border: 0;
  color: #fff;
  padding: 6px 10px;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
  transition: 0.3s;
}

.suggested-item button:hover {
  background: var(--brand-dark);
}
</style>
</head>
<body>
<header>
  <div class="brand">
    <img src="https://i.postimg.cc/bJRyWDhS/file-000000003574620aa7b29924f4c1965a.png" alt="Logo"/>
  </div>
  <nav class="nav">
<div class="hamburger" id="hamburger" style="color: white;">
  <span></span>
  <span></span>
  <span></span>
</div>

<div class="menu" id="menu">
  <a href="index.html">Home</a>
  <a href="#">Shop</a>
  <a href="#">About</a>
  <a href="#">Contact</a>
</div>
<div class="cart-icon">
  <a href="cart.html" class="cart-btn">    
    <i class="fas fa-shopping-bag"></i>
    <span id="cartCount">0</span>
  </a>
</div>
</nav>
</header>

<section class="cart-section">
  <header><strong>ðŸ›’ Your Cart</strong></header>
  <div class="cart-list" id="cartList"></div>
  <div class="cart-footer" id="cartFooter">
  <div class="total"><span>Subtotal</span><span id="subtotal">GHâ‚µ 0</span></div>
  <a href="checkout.html" class="checkout-btn">Proceed to Checkout</a>
</div>
</section>
<div class="suggested-products" id="suggestedProducts"></div>
<footer>
  Â© <span id="year"></span> On God Bend OGB â€” All Rights Reserved.
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
import { getFirestore, collection, getDocs, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

// ðŸ”¥ Your Firebase config
 const firebaseConfig = {
  apiKey: "AIzaSyAwzdua-29Bp19C5_OfXX4PWuCGHsOKfag",
  authDomain: "ongod-5073e.firebaseapp.com",
  projectId: "ongod-5073e",
  storageBucket: "ongod-5073e.firebasestorage.app",
  messagingSenderId: "439687837026",
  appId: "1:439687837026:web:1f752fc79a41e9f5bd283b",
  measurementId: "G-1TVP0X3J62"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// ---------------------------
// Suggested products
// ---------------------------
async function renderSuggestions(){
  const container = document.getElementById("suggestedProducts");
  const productsRef = collection(db, "products");
  const snapshot = await getDocs(productsRef);

  let allProducts = [];
  snapshot.forEach(docSnap => {
    allProducts.push({ id: docSnap.id, ...docSnap.data() });
  });

  // Pick random 4
  const shuffled = allProducts.sort(() => 0.5 - Math.random());
  const suggestions = shuffled.slice(0, 4);

  if(suggestions.length === 0){
    container.innerHTML = "";
    return;
  }

  container.innerHTML = `
    <h3>You may also like</h3>
    <div class="suggested-grid">
      ${suggestions.map(p=>`
        <div class="suggested-item">
       <img src="${p.image}" alt="${p.name}">
          <h4>${p.name}</h4>
          <p>GHâ‚µ ${p.price.toFixed(2)}</p>
          <button onclick="addSuggested('${p.id}')">Add to Cart</button>
        </div>
      `).join("")}
    </div>
  `;
}

async function addSuggested(productId){
  const productRef = doc(db, "products", productId);
  const productSnap = await getDoc(productRef);

  if(productSnap.exists()){
    let cart = getCart();
    let product = { id: productSnap.id, ...productSnap.data() };

    let existing = cart.find(item => item.id === product.id);
    if(existing){
      existing.qty++;
    } else {
      cart.push({...product, qty:1});
    }
    saveCart(cart);
    updateBadge(); // refresh badge instantly
  }
}

// ---------------------------
// Cart functions
// ---------------------------
function getCart(){ 
  return JSON.parse(localStorage.getItem("cart"))||[]; 
}

function saveCart(cart){ 
  localStorage.setItem("cart",JSON.stringify(cart)); 
  updateBadge(); 
  renderCart(); 
}

function updateBadge() {
  const cart = getCart();
  const totalQty = cart.reduce((sum, item) => sum + item.qty, 0); 
  document.getElementById("cartCount").textContent = totalQty;
}

function renderCart(){
  const list = document.getElementById("cartList");
  const cart = getCart();
  const footer = document.getElementById("cartFooter");
  list.innerHTML = "";
  let subtotal = 0;

  if(cart.length===0){ 
    list.innerHTML = `
      <div class="empty-cart">
        <i class="fas fa-shopping-cart"></i>
        <h2>Your cart is empty</h2>
        <p>Looks like you havenâ€™t added anything yet.</p>
        <a href="index.html">Continue Shopping</a>
      </div>
    `;
    footer.style.display = "none";   // hide subtotal + checkout
  } else {
    footer.style.display = "block";

    cart.forEach((item,i)=>{
      subtotal += item.price*item.qty;
      const div = document.createElement("div");
      div.className = "cart-item";
      div.innerHTML = `
       <img src="${item.image}" alt="${item.name}">
        <div>
          <strong>${item.name}</strong><br/>
          GHâ‚µ ${item.price.toFixed(2)} each
        </div>
        <div class="qty">
          <button onclick="decrease(${i})">-</button>
          <span>${item.qty}</span>
          <button onclick="increase(${i})">+</button>
          <button style="margin-left:6px;background:#f44336;color:#fff;" onclick="removeItem(${i})">Ã—</button>
        </div>
      `;
      list.appendChild(div);
    });
    document.getElementById("subtotal").textContent = "GHâ‚µ "+subtotal;
  }

  // âœ… Always show suggested products
  renderSuggestions(); 
}

function increase(i){ 
  let cart=getCart(); 
  cart[i].qty++; 
  saveCart(cart); 
}

function decrease(i){ 
  let cart=getCart(); 
  if(cart[i].qty>1){ 
    cart[i].qty--; 
    saveCart(cart); 
  } 
}

function removeItem(i){ 
  let cart=getCart(); 
  cart.splice(i,1); 
  saveCart(cart); 
}

// ---------------------------
// Init
// ---------------------------
document.getElementById("year").textContent = new Date().getFullYear();
renderCart();
updateBadge();

// expose functions to window (needed for inline onclick)
window.addSuggested = addSuggested;
window.increase = increase;
window.decrease = decrease;
window.removeItem = removeItem;
</script>
<script>
  const hamburger = document.getElementById('hamburger');
  const menu = document.getElementById('menu');

  // Toggle menu on hamburger click
  hamburger.addEventListener('click', (e) => {
    e.stopPropagation(); // prevent closing immediately
    hamburger.classList.toggle('active');
    menu.classList.toggle('active');
  });

  // Close menu when clicking outside
  document.addEventListener('click', (e) => {
    if (!menu.contains(e.target) && !hamburger.contains(e.target)) {
      menu.classList.remove('active');
      hamburger.classList.remove('active');
    }
  });
</script>
</body>
</html>